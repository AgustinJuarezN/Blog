"use strict";(self.webpackChunkangular_template=self.webpackChunkangular_template||[]).push([[403],{9403:(K,c,e)=>{e.r(c),e.d(c,{default:()=>$});var _=e(6895),i=e(8019),d=e(420),u=e(4281),g=e(8736),l=e(1624),D=e(2474),f=e(2648),E=e(5593),O=e(1724),p=e(3248),h=e(4006),t=e(4650),U=e(9653),M=e(6026),T=e(7185),P=e(805),A=e(4688),v=e(1422);const C=["dynamicForm"];function R(a,o){1&a&&t._UZ(0,"error-badge",9),2&a&&t.Q6J("error",o.ngIf)}function I(a,o){1&a&&t._UZ(0,"loading")}function Z(a,o){1&a&&(t.TgZ(0,"tr")(1,"th"),t._uU(2,"Username"),t.qZA(),t.TgZ(3,"th"),t._uU(4,"Email"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Name"),t.qZA()())}function L(a,o){if(1&a&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA()()),2&a){const s=o.$implicit,n=t.oxw();t.xp6(2),t.Oqu(n.$(s).username),t.xp6(2),t.Oqu(n.$(s).email),t.xp6(2),t.AsE("",n.$(s).firstName," ",n.$(s).lastName,"")}}const y=function(){return{"min-width":"50rem"}},W=[{type:u.fS.DATE,name:"startDate",label:"Start from",placeholder:"Select a start date",validators:[h.kI.required]},{type:u.fS.DATE,name:"endDate",label:"To",validators:[h.kI.required],placeholder:"Select a final date"}];let $=(()=>{class a{constructor(s,n,r){this.store=s,this.userService=n,this.toast=r,this.structure$=this.store.select(g.L.selectStructure),this.data$=this.store.select(g.L.selectData),this.users$=this.store.select(i.u.selectEntities),this.loading$=this.store.select(i.u.selectLoading),this.error$=this.store.select(i.u.selectError),this.$=m=>m}ngOnInit(){this.store.dispatch(l.i.setStructure({structure:W}))}updateForm(s){this.store.dispatch(l.i.updateData({state:s}))}submit(){this.dynamicForm.submitted(),this.dynamicForm.form.valid?this.store.dispatch(p.W.loadUsersRanking()):this.handleInvalidForm()}handleInvalidForm(){this.toast.error("Form submission failed. Please correct the highlighted fields.","Error")}ngOnDestroy(){this.store.dispatch(p.W.reset()),this.store.dispatch(l.i.resetForm())}}return a.\u0275fac=function(s){return new(s||a)(t.Y36(U.yh),t.Y36(M.K),t.Y36(T._W))},a.\u0275cmp=t.Xpm({type:a,selectors:[["users-ranking"]],viewQuery:function(s,n){if(1&s&&t.Gf(C,7),2&s){let r;t.iGM(r=t.CRH())&&(n.dynamicForm=r.first)}},standalone:!0,features:[t.jDz],decls:16,vars:16,consts:[[1,"private-page-container"],[3,"error",4,"ngIf"],[1,"form",3,"data$","structure$","updateForm"],["dynamicForm",""],["label","Filter",3,"loading","click"],[4,"ngIf"],["styleClass","p-datatable-striped",3,"value","tableStyle"],["pTemplate","header"],["pTemplate","body"],[3,"error"]],template:function(s,n){if(1&s&&(t.TgZ(0,"section",0)(1,"h1"),t._uU(2,"Most Active Users Ranking"),t.qZA(),t.YNc(3,R,1,1,"error-badge",1),t.ALo(4,"async"),t.TgZ(5,"dynamic-form",2,3),t.NdJ("updateForm",function(m){return n.updateForm(m)}),t.qZA(),t.TgZ(7,"div")(8,"p-button",4),t.NdJ("click",function(){return n.submit()}),t.ALo(9,"async"),t.qZA()(),t.YNc(10,I,1,0,"loading",5),t.ALo(11,"async"),t.TgZ(12,"p-table",6),t.ALo(13,"async"),t.YNc(14,Z,7,0,"ng-template",7),t.YNc(15,L,7,4,"ng-template",8),t.qZA()()),2&s){let r;t.xp6(3),t.Q6J("ngIf",t.lcZ(4,7,n.error$)),t.xp6(2),t.Q6J("data$",n.data$)("structure$",n.structure$),t.xp6(3),t.Q6J("loading",null!==(r=t.lcZ(9,9,n.loading$))&&void 0!==r&&r),t.xp6(2),t.Q6J("ngIf",t.lcZ(11,11,n.loading$)),t.xp6(2),t.Q6J("value",t.lcZ(13,13,n.users$))("tableStyle",t.DdM(15,y))}},dependencies:[_.ez,_.O5,_.Ov,d.U$,d.iA,P.jx,D.I,A.N,E.hJ,E.zx,f.N,v.r,O.Z],changeDetection:0}),a})()}}]);