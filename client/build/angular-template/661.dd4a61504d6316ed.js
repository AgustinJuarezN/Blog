"use strict";(self.webpackChunkangular_template=self.webpackChunkangular_template||[]).push([[661],{5257:(T,h,i)=>{i.d(h,{n:()=>g});var t=i(4128),s=i(4004),l=i(9507),f=i(9450),a=i(4650),e=i(4640),A=i(9653);let g=(()=>{class y{constructor(o,E){this.api=o,this.store=E,this.author$=this.store.select(f.A.selectLoggedUser),this.author=null,this.author$.subscribe(p=>{this.author=p})}filterBy(o=null,E){return this.api.get(null!==o&&E===l.j1.Recent?`/articles/recent?q=${o}`:null!==o&&E===l.j1.AllArticles?`/articles?q=${o}`:null===o&&E===l.j1.Recent?"/articles/recent":"/articles")}getRecentArticles(o=null){return this.api.get(null===o?"/articles/recent":`/articles/recent?authorId=${o}`)}getAllArticles(o=null){return this.api.get(null===o?"/articles":`/articles?authorId=${o}`)}deleteArticle(o){return this.api.delete("/articles/"+o)}publishArticle(o){return o?.id?this.api.put("/articles/"+o.id,this.toArticle(o)):this.api.post("/articles/",this.toNewArticle(o))}getArticle(o){return this.api.get("/articles/"+o)}toNewArticle(o){if(this.author&&this.author.id)return{authorId:this.author.id,private:o.private,content:o.content,firstImage:o.image[0]?.data||"",secondImage:o.image[1]?.data||"",template:o.template,title:o.title};throw new Error("Author or author ID is not defined")}toArticle(o){if(null==o.id)throw new Error("ArticleForm must have an id.");if(null==o.authorId)throw new Error("ArticleForm must have an authorId.");return{id:o.id,authorId:o.authorId,title:o.title,private:o.private,comments:o.comments||[],content:o.content,firstImage:o.image[0]?.data||"",secondImage:o.image[1]?.data||"",template:o.template,createdAt:o.createdAt||"",updatedAt:new Date}}approveArticle(o){return this.api.post(`/articles/${o}/approve`)}rejectArticle(o){return this.api.post(`/articles/${o}/reject`)}markAllCommentsAsViewed(o){return this.api.post(`/articles/${o}/markAllCommentsAsViewed`)}getOffensiveItems(){return(0,t.D)({articles:this.getOffensiveArticles(),comments:this.getOffensiveComments()}).pipe((0,s.U)(o=>({articles:o.articles.length,comments:o.comments.length})))}getOffensiveArticles(){return this.api.get("/articles?Isapproved=false")}getOffensiveComments(){return this.api.get("/comments?Isapproved=false&IsRejected=false")}getImporterOptions(){return this.api.get("/importers").pipe((0,s.U)(o=>o.map((E,p)=>({id:p,description:E}))))}importArticles(o){return this.api.post("/importers/import",o)}}return y.\u0275fac=function(o){return new(o||y)(a.LFG(e.s),a.LFG(A.yh))},y.\u0275prov=a.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"}),y})()},2625:(T,h,i)=>{i.d(h,{r:()=>a});var t=i(1135),s=i(4004),l=i(4650),f=i(4640);let a=(()=>{class e{constructor(g){this.api=g,this.userNotifications$=new t.X(null)}getComments(g){return this.api.get(`/articles/${g}/comments`)}addComment(g,y,U=""){return this.api.post("/comments/",{articleId:g,authorId:y,content:U})}addReply(g,y){return this.api.post(`/comments/${g}/reply`,y)}approveComment(g){return this.api.post(`/comments/${g}/approve`)}rejectComment(g){return this.api.post(`/comments/${g}/reject`)}getMyComments(){return this.api.get("/users/activities")}getOffensiveComments(){return this.api.get("/comments?Isapproved=false&IsRejected=false")}getUserNotifications(){return this.api.get("/users/activities").pipe((0,s.U)(g=>g.filter(y=>y.isApproved&&!y.isRejected)),(0,s.U)(g=>g.length))}}return e.\u0275fac=function(g){return new(g||e)(l.LFG(f.s))},e.\u0275prov=l.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},6434:(T,h,i)=>{i.d(h,{u:()=>s});var t=i(9653);const s=(0,t.R7)({source:"Article List",events:{Reset:(0,t.uZ)(),"Load Recent Articles":(0,t.uZ)(),"Load My Articles":(0,t.uZ)(),"Load Offensive Articles":(0,t.uZ)(),"Load User Articles":(0,t.Ky)(),"Load Articles Success":(0,t.Ky)(),"Load Articles Failure":(0,t.Ky)(),"Filter Articles By":(0,t.Ky)(),"Delete Article":(0,t.Ky)()}})},9083:(T,h,i)=>{i.d(h,{$:()=>f});var t=i(9653),s=i(6434);const l={entities:[],count:0,loaded:!1,loading:!1,error:null,editing:!1},f=(0,t.Tz)({name:"articleList",reducer:(0,t.Lq)(l,(0,t.on)(s.u.reset,()=>l),(0,t.on)(s.u.loadRecentArticles,a=>({...a,loading:!0,editing:!1})),(0,t.on)(s.u.loadUserArticles,s.u.loadOffensiveArticles,a=>({...a,loading:!0,editing:!1})),(0,t.on)(s.u.loadMyArticles,a=>({...a,loading:!0,editing:!0})),(0,t.on)(s.u.loadArticlesSuccess,(a,{articles:e})=>({...a,entities:e,count:10,loaded:!0,loading:!1,error:l.error})),(0,t.on)(s.u.loadArticlesFailure,(a,e)=>({...a,entities:l.entities,loaded:!1,loading:!1,error:e.error})),(0,t.on)(s.u.deleteArticle,a=>({...a,loading:!0})))})},1318:(T,h,i)=>{i.d(h,{o:()=>s});var t=i(9653);const s=(0,t.R7)({source:"Article",events:{reset:(0,t.uZ)(),"Approve Article":(0,t.Ky)(),"Reject Article":(0,t.Ky)(),"Approve Article Comment":(0,t.Ky)(),"Reject Article Comment":(0,t.Ky)(),"Load Article":(0,t.Ky)(),"Load Article Success":(0,t.Ky)(),"Load Article Failure":(0,t.Ky)(),"Load Comments":(0,t.Ky)(),"Load Comments Success":(0,t.Ky)(),"Load Comments Failure":(0,t.Ky)(),"Add Comment":(0,t.Ky)(),"Add Comment Success":(0,t.Ky)(),"Add Comment Failure":(0,t.Ky)(),"Add Reply":(0,t.Ky)(),"Add Reply Success":(0,t.Ky)(),"Add Reply Failure":(0,t.Ky)(),"Mark All Comments as Viewed":(0,t.uZ)(),"Open Reply Box":(0,t.Ky)(),"Close Reply Box":(0,t.uZ)()}})},218:(T,h,i)=>{i.d(h,{j:()=>f});var t=i(9653),s=i(1318);const l={data:null,loaded:!1,loading:!1,error:null,openedReplyBox:null},f=(0,t.Tz)({name:"article",reducer:(0,t.Lq)(l,(0,t.on)(s.o.reset,()=>l),(0,t.on)(s.o.loadArticle,a=>({...a,loading:!0})),(0,t.on)(s.o.loadArticleSuccess,(a,e)=>({...a,data:e.article,loaded:!0,loading:!1,error:null})),(0,t.on)(s.o.loadArticleFailure,(a,{error:e})=>({...a,loaded:!1,loading:!1,error:e})),(0,t.on)(s.o.addComment,s.o.addReply,s.o.approveArticle,s.o.rejectArticle,s.o.approveArticleComment,s.o.rejectArticleComment,a=>({...a,loading:!0})),(0,t.on)(s.o.addCommentSuccess,s.o.addReplySuccess,a=>({...a,loading:!1})),(0,t.on)(s.o.addCommentFailure,s.o.addReplyFailure,a=>({...a,loading:!1})),(0,t.on)(s.o.openReplyBox,(a,{commentId:e})=>({...a,openedReplyBox:e})),(0,t.on)(s.o.closeReplyBox,a=>({...a,openedReplyBox:null})))})},6155:(T,h,i)=>{i.d(h,{X:()=>U});var t=i(218),s=i(9653);const{selectArticleState:l,selectData:f,selectLoaded:a,selectLoading:e,selectError:A,selectOpenedReplyBox:g}=t.j,U=((0,s.P1)(f,o=>o?.authorId),{selectArticleState:l,selectData:f,selectLoaded:a,selectLoading:e,selectError:A,selectOpenedReplyBox:g})},3607:(T,h,i)=>{i.d(h,{p:()=>s});var t=i(9653);const s=(0,t.R7)({source:"Comment List",events:{Reset:(0,t.uZ)(),"Approve Comment":(0,t.Ky)(),"Reject Comment":(0,t.Ky)(),"Load Offensive Comments":(0,t.uZ)(),"Load My Comments":(0,t.uZ)(),"Load Comments Success":(0,t.Ky)(),"Load Comments Failure":(0,t.Ky)(),"Add Reply":(0,t.Ky)(),"Add Reply Success":(0,t.Ky)(),"Add Reply Failure":(0,t.Ky)(),"Open Reply Box":(0,t.Ky)(),"Close Reply Box":(0,t.uZ)()}})},6996:(T,h,i)=>{i.d(h,{c:()=>f});var t=i(9653),s=i(3607);const l={entities:[],loaded:!1,loading:!1,error:null,openedReplyBox:null},f=(0,t.Tz)({name:"commentList",reducer:(0,t.Lq)(l,(0,t.on)(s.p.reset,()=>l),(0,t.on)(s.p.loadMyComments,s.p.loadOffensiveComments,a=>({...a,loading:!0,editing:!1})),(0,t.on)(s.p.loadCommentsSuccess,(a,{comments:e})=>({...a,entities:e,loaded:!0,loading:!1,error:l.error})),(0,t.on)(s.p.loadCommentsFailure,(a,e)=>({...a,entities:l.entities,loaded:!1,loading:!1,error:e.error})),(0,t.on)(s.p.addReply,s.p.approveComment,s.p.rejectComment,a=>({...a,loading:!0,error:l.error})),(0,t.on)(s.p.addReplySuccess,a=>({...a,loading:!1,error:l.error})),(0,t.on)(s.p.addReplyFailure,(a,e)=>({...a,loading:!1,error:e.error})),(0,t.on)(s.p.openReplyBox,(a,{commentId:e})=>({...a,openedReplyBox:e})),(0,t.on)(s.p.closeReplyBox,a=>({...a,openedReplyBox:null})))})},1563:(T,h,i)=>{i.d(h,{O:()=>a});var t=i(4004),s=i(9450),l=i(4650),f=i(9653);let a=(()=>{class e{constructor(g,y,U){this.templateRef=g,this.viewContainer=y,this.store=U,this.hasView=!1,this.requiredRoles=[]}ngOnInit(){this.subscription=this.store.select(s.A.selectLoggedUser).pipe((0,t.U)(g=>g?.roles??[])).subscribe(g=>{const y=this.requiredRoles.every(U=>g.includes(U));y&&!this.hasView?(this.viewContainer.createEmbeddedView(this.templateRef),this.hasView=!0):!y&&this.hasView&&(this.viewContainer.clear(),this.hasView=!1)})}ngOnDestroy(){this.subscription.unsubscribe()}}return e.\u0275fac=function(g){return new(g||e)(l.Y36(l.Rgc),l.Y36(l.s_b),l.Y36(f.yh))},e.\u0275dir=l.lG2({type:e,selectors:[["","requiredRoles",""]],inputs:{requiredRoles:"requiredRoles"},standalone:!0}),e})()},7661:(T,h,i)=>{i.r(h),i.d(h,{default:()=>ke});var t=i(9653),s=i(2260),l=i(6895),f=i(8759),a=i(1795),e=i(4650),A=i(805);function g(n,u){if(1&n&&(e.TgZ(0,"span",1),e._uU(1),e.qZA()),2&n){const r=e.oxw();e.Tol(r.styleClass),e.Q6J("ngClass",r.containerClass())("ngStyle",r.style),e.xp6(1),e.Oqu(r.value)}}let U=(()=>{class n{constructor(){this.badgeDisabled=!1}containerClass(){return{"p-badge p-component":!0,"p-badge-no-gutter":null!=this.value&&1===String(this.value).length,"p-badge-lg":"large"===this.size,"p-badge-xl":"xlarge"===this.size,"p-badge-info":"info"===this.severity,"p-badge-success":"success"===this.severity,"p-badge-warning":"warning"===this.severity,"p-badge-danger":"danger"===this.severity}}}return n.\u0275fac=function(r){return new(r||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["p-badge"]],hostAttrs:[1,"p-element"],inputs:{styleClass:"styleClass",style:"style",size:"size",severity:"severity",value:"value",badgeDisabled:"badgeDisabled"},decls:1,vars:1,consts:[[3,"ngClass","class","ngStyle",4,"ngIf"],[3,"ngClass","ngStyle"]],template:function(r,d){1&r&&e.YNc(0,g,2,5,"span",0),2&r&&e.Q6J("ngIf",!d.badgeDisabled)},dependencies:[l.mk,l.O5,l.PC],styles:[".p-badge{display:inline-block;border-radius:10px;text-align:center;padding:0 .5rem}.p-overlay-badge{position:relative}.p-overlay-badge .p-badge{position:absolute;top:0;right:0;transform:translate(50%,-50%);transform-origin:100% 0;margin:0}.p-badge-dot{width:.5rem;min-width:.5rem;height:.5rem;border-radius:50%;padding:0}.p-badge-no-gutter{padding:0;border-radius:50%}\n"],encapsulation:2,changeDetection:0}),n})(),o=(()=>{class n{}return n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[l.ez,A.m8]}),n})();var E=i(1740),p=i(9592);let I=(()=>{class n{constructor(r,d,m){this.el=r,this.renderer=d,this.zone=m}clickListener(){this.target=this.resolveTarget(),this.toggleClass?this.toggle():null===this.target.offsetParent?this.enter():this.leave()}toggle(){p.p.hasClass(this.target,this.toggleClass)?p.p.removeClass(this.target,this.toggleClass):p.p.addClass(this.target,this.toggleClass)}enter(){this.enterActiveClass?this.animating||(this.animating=!0,"slidedown"===this.enterActiveClass&&(this.target.style.height="0px",p.p.removeClass(this.target,"hidden"),this.target.style.maxHeight=this.target.scrollHeight+"px",p.p.addClass(this.target,"hidden"),this.target.style.height=""),p.p.addClass(this.target,this.enterActiveClass),this.enterClass&&p.p.removeClass(this.target,this.enterClass),this.enterListener=this.renderer.listen(this.target,"animationend",()=>{p.p.removeClass(this.target,this.enterActiveClass),this.enterToClass&&p.p.addClass(this.target,this.enterToClass),this.enterListener(),"slidedown"===this.enterActiveClass&&(this.target.style.maxHeight=""),this.animating=!1})):(this.enterClass&&p.p.removeClass(this.target,this.enterClass),this.enterToClass&&p.p.addClass(this.target,this.enterToClass)),this.hideOnOutsideClick&&this.bindDocumentClickListener(),this.hideOnEscape&&this.bindDocumentKeydownListener()}leave(){this.leaveActiveClass?this.animating||(this.animating=!0,p.p.addClass(this.target,this.leaveActiveClass),this.leaveClass&&p.p.removeClass(this.target,this.leaveClass),this.leaveListener=this.renderer.listen(this.target,"animationend",()=>{p.p.removeClass(this.target,this.leaveActiveClass),this.leaveToClass&&p.p.addClass(this.target,this.leaveToClass),this.leaveListener(),this.animating=!1})):(this.leaveClass&&p.p.removeClass(this.target,this.leaveClass),this.leaveToClass&&p.p.addClass(this.target,this.leaveToClass)),this.hideOnOutsideClick&&this.unbindDocumentClickListener(),this.hideOnEscape&&this.unbindDocumentKeydownListener()}resolveTarget(){if(this.target)return this.target;switch(this.selector){case"@next":return this.el.nativeElement.nextElementSibling;case"@prev":return this.el.nativeElement.previousElementSibling;case"@parent":return this.el.nativeElement.parentElement;case"@grandparent":return this.el.nativeElement.parentElement.parentElement;default:return document.querySelector(this.selector)}}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=this.renderer.listen(this.el.nativeElement.ownerDocument,"click",r=>{this.isVisible()&&"static"!==getComputedStyle(this.target).getPropertyValue("position")?this.isOutsideClick(r)&&this.leave():this.unbindDocumentClickListener()}))}bindDocumentKeydownListener(){this.documentKeydownListener||this.zone.runOutsideAngular(()=>{this.documentKeydownListener=this.renderer.listen(this.el.nativeElement.ownerDocument,"keydown",r=>{const{key:d,keyCode:m,which:K}=r;(!this.isVisible()||"static"===getComputedStyle(this.target).getPropertyValue("position"))&&this.unbindDocumentKeydownListener(),this.isVisible()&&"Escape"===d&&27===m&&27===K&&this.leave()})})}isVisible(){return null!==this.target.offsetParent}isOutsideClick(r){return!this.el.nativeElement.isSameNode(r.target)&&!this.el.nativeElement.contains(r.target)&&!this.target.contains(r.target)}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}unbindDocumentKeydownListener(){this.documentKeydownListener&&(this.documentKeydownListener(),this.documentKeydownListener=null)}ngOnDestroy(){this.target=null,this.eventListener&&this.eventListener(),this.unbindDocumentClickListener(),this.unbindDocumentKeydownListener()}}return n.\u0275fac=function(r){return new(r||n)(e.Y36(e.SBq),e.Y36(e.Qsj),e.Y36(e.R0b))},n.\u0275dir=e.lG2({type:n,selectors:[["","pStyleClass",""]],hostAttrs:[1,"p-element"],hostBindings:function(r,d){1&r&&e.NdJ("click",function(K){return d.clickListener(K)})},inputs:{selector:["pStyleClass","selector"],enterClass:"enterClass",enterActiveClass:"enterActiveClass",enterToClass:"enterToClass",leaveClass:"leaveClass",leaveActiveClass:"leaveActiveClass",leaveToClass:"leaveToClass",hideOnOutsideClick:"hideOnOutsideClick",toggleClass:"toggleClass",hideOnEscape:"hideOnEscape"}}),n})(),S=(()=>{class n{}return n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[l.ez]}),n})();var B=i(1135),F=i(9450),J=i(6632),W=i(9507),z=i(1563),$=i(8271),P=i(5698),j=i(2625);const N=function(){return{exact:!0}};function ne(n,u){if(1&n){const r=e.EpF();e.TgZ(0,"a",35),e.NdJ("click",function(){e.CHM(r);const m=e.oxw(4);return e.KtG(m.showAdminOptions$.next(!1))}),e.TgZ(1,"span",9),e._uU(2,"Users"),e.qZA()()}2&n&&e.Q6J("routerLink","/private/users")("routerLinkActiveOptions",e.DdM(2,N))}const w=function(n){return[n]};function re(n,u){if(1&n&&(e.TgZ(0,"li"),e.YNc(1,ne,3,3,"a",34),e.qZA()),2&n){const r=e.oxw(3);e.xp6(1),e.Q6J("requiredRoles",e.VKq(1,w,r.roleType.Admin))}}function oe(n,u){if(1&n){const r=e.EpF();e.TgZ(0,"a",35),e.NdJ("click",function(){e.CHM(r);const m=e.oxw(4);return e.KtG(m.showAdminOptions$.next(!1))}),e.TgZ(1,"span",9),e._uU(2,"Offensive Articles"),e.qZA()()}2&n&&e.Q6J("routerLink","/private/users/offensive-articles")("routerLinkActiveOptions",e.DdM(2,N))}function ae(n,u){if(1&n&&(e.TgZ(0,"li"),e.YNc(1,oe,3,3,"a",34),e.qZA()),2&n){const r=e.oxw(3);e.xp6(1),e.Q6J("requiredRoles",e.VKq(1,w,r.roleType.Admin))}}function le(n,u){if(1&n){const r=e.EpF();e.TgZ(0,"a",35),e.NdJ("click",function(){e.CHM(r);const m=e.oxw(4);return e.KtG(m.showAdminOptions$.next(!1))}),e.TgZ(1,"span",9),e._uU(2,"Offensive Comments"),e.qZA()()}2&n&&e.Q6J("routerLink","/private/users/offensive-comments")("routerLinkActiveOptions",e.DdM(2,N))}function ce(n,u){if(1&n&&(e.TgZ(0,"li"),e.YNc(1,le,3,3,"a",34),e.qZA()),2&n){const r=e.oxw(3);e.xp6(1),e.Q6J("requiredRoles",e.VKq(1,w,r.roleType.Admin))}}function de(n,u){if(1&n){const r=e.EpF();e.TgZ(0,"a",35),e.NdJ("click",function(){e.CHM(r);const m=e.oxw(4);return e.KtG(m.showAdminOptions$.next(!1))}),e.TgZ(1,"span",9),e._uU(2,"Set Offensive Words"),e.qZA()()}2&n&&e.Q6J("routerLink","/private/users/offensive-words")("routerLinkActiveOptions",e.DdM(2,N))}function ue(n,u){if(1&n&&(e.TgZ(0,"li"),e.YNc(1,de,3,3,"a",34),e.qZA()),2&n){const r=e.oxw(3);e.xp6(1),e.Q6J("requiredRoles",e.VKq(1,w,r.roleType.Admin))}}function pe(n,u){if(1&n){const r=e.EpF();e.TgZ(0,"a",35),e.NdJ("click",function(){e.CHM(r);const m=e.oxw(4);return e.KtG(m.showAdminOptions$.next(!1))}),e.TgZ(1,"span",9),e._uU(2,"Import Articles"),e.qZA()()}2&n&&e.Q6J("routerLink","/private/articles/import")("routerLinkActiveOptions",e.DdM(2,N))}function me(n,u){if(1&n&&(e.TgZ(0,"li"),e.YNc(1,pe,3,3,"a",34),e.qZA()),2&n){const r=e.oxw(3);e.xp6(1),e.Q6J("requiredRoles",e.VKq(1,w,r.roleType.Admin))}}function ge(n,u){if(1&n){const r=e.EpF();e.TgZ(0,"a",35),e.NdJ("click",function(){e.CHM(r);const m=e.oxw(4);return e.KtG(m.showAdminOptions$.next(!1))}),e.TgZ(1,"span",9),e._uU(2,"Users Ranking"),e.qZA()()}2&n&&e.Q6J("routerLink","/private/users/ranking")("routerLinkActiveOptions",e.DdM(2,N))}function he(n,u){if(1&n&&(e.TgZ(0,"li"),e.YNc(1,ge,3,3,"a",34),e.qZA()),2&n){const r=e.oxw(3);e.xp6(1),e.Q6J("requiredRoles",e.VKq(1,w,r.roleType.Admin))}}function fe(n,u){if(1&n){const r=e.EpF();e.TgZ(0,"li",29),e.NdJ("click",function(){e.CHM(r);const m=e.oxw(2);return e.KtG(m.showAdminOptions$.next(!0))}),e.TgZ(1,"a",30),e._UZ(2,"i",31),e.TgZ(3,"span",9),e._uU(4,"Admin"),e.qZA(),e._UZ(5,"i",32),e.qZA(),e.TgZ(6,"ul",33),e.YNc(7,re,2,3,"li",26),e.ALo(8,"async"),e.YNc(9,ae,2,3,"li",26),e.ALo(10,"async"),e.YNc(11,ce,2,3,"li",26),e.ALo(12,"async"),e.YNc(13,ue,2,3,"li",26),e.ALo(14,"async"),e.YNc(15,me,2,3,"li",26),e.ALo(16,"async"),e.YNc(17,he,2,3,"li",26),e.ALo(18,"async"),e.qZA()()}if(2&n){const r=e.oxw(2);e.xp6(1),e.Q6J("hideOnOutsideClick",!0),e.xp6(6),e.Q6J("ngIf",e.lcZ(8,7,r.showAdminOptions$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(10,9,r.showAdminOptions$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(12,11,r.showAdminOptions$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(14,13,r.showAdminOptions$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(16,15,r.showAdminOptions$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(18,17,r.showAdminOptions$))}}function ve(n,u){1&n&&e._UZ(0,"p-badge",36),2&n&&e.Q6J("value",u.ngIf)}const _e=function(){return["/private","users","profile"]};function Ce(n,u){if(1&n){const r=e.EpF();e.TgZ(0,"li")(1,"a",37),e.NdJ("click",function(){e.CHM(r);const m=e.oxw(2);return e.KtG(m.showUserOptions$.next(!1))}),e._UZ(2,"span",38),e.TgZ(3,"span",9),e._uU(4,"Profile"),e.qZA()()()}2&n&&(e.xp6(1),e.Q6J("routerLink",e.DdM(1,_e)))}const Ae=function(){return["articles","personal"]},ye=function(){return["/private","users","notifications"]};function xe(n,u){if(1&n){const r=e.EpF();e.TgZ(0,"div",1)(1,"a",2),e._UZ(2,"i",3),e.qZA(),e.TgZ(3,"div",4)(4,"ul",5)(5,"li",6)(6,"a",7),e._UZ(7,"span",8),e.TgZ(8,"span",9),e._uU(9,"Home"),e.qZA()()(),e.TgZ(10,"li",6)(11,"a",7),e._UZ(12,"span",10),e.TgZ(13,"span",9),e._uU(14,"New Post"),e.qZA()()(),e.YNc(15,fe,19,19,"li",11),e.qZA()(),e.TgZ(16,"a",2),e._UZ(17,"i",12),e.qZA(),e.TgZ(18,"div",13)(19,"ul",5)(20,"li",6)(21,"a",14),e._UZ(22,"span",15),e.TgZ(23,"span",16),e._uU(24,"My Posts"),e.qZA()()(),e.TgZ(25,"li",6)(26,"a",14),e._UZ(27,"span",17),e.TgZ(28,"span",16),e._uU(29,"Notifications"),e.qZA(),e.YNc(30,ve,1,1,"p-badge",18),e.ALo(31,"async"),e.qZA()(),e.TgZ(32,"li",19),e.NdJ("click",function(){e.CHM(r);const m=e.oxw();return e.KtG(m.showUserOptions$.next(!0))}),e.TgZ(33,"a",20),e._UZ(34,"p-avatar",21),e.TgZ(35,"span",22),e._uU(36),e.qZA(),e._UZ(37,"i",23),e.qZA(),e.TgZ(38,"div",24)(39,"ul",25),e.YNc(40,Ce,5,2,"li",26),e.ALo(41,"async"),e.TgZ(42,"li")(43,"a",27),e.NdJ("click",function(){e.CHM(r);const m=e.oxw();return e.KtG(m.logout())}),e._UZ(44,"span",28),e.TgZ(45,"span",9),e._uU(46,"Log Out"),e.qZA()()()()()()()()()}if(2&n){const r=u.ngIf,d=e.oxw();e.xp6(1),e.Q6J("hideOnOutsideClick",!0),e.xp6(5),e.Q6J("routerLink","articles")("routerLinkActiveOptions",e.DdM(21,N)),e.xp6(5),e.Q6J("routerLink","articles/new")("routerLinkActiveOptions",e.DdM(22,N)),e.xp6(4),e.Q6J("requiredRoles",e.VKq(23,w,d.roleType.Admin)),e.xp6(1),e.Q6J("hideOnOutsideClick",!0),e.xp6(5),e.Q6J("routerLink",e.DdM(25,Ae))("routerLinkActiveOptions",e.DdM(26,N)),e.xp6(5),e.Q6J("routerLink",e.DdM(27,ye))("routerLinkActiveOptions",e.DdM(28,N)),e.xp6(4),e.Q6J("ngIf",e.lcZ(31,17,d.commentsService.userNotifications$)),e.xp6(3),e.Q6J("hideOnOutsideClick",!0),e.xp6(1),e.Q6J("label",r.firstName[0].toUpperCase()+r.lastName[0].toUpperCase()),e.xp6(2),e.AsE("",r.firstName," ",r.lastName,""),e.xp6(4),e.Q6J("ngIf",e.lcZ(41,19,d.showUserOptions$))}}let Ee=(()=>{class n{constructor(r,d){this.store=r,this.commentsService=d,this.user$=this.store.select(F.A.selectLoggedUser),this.roleType=W.GD,this.showAdminOptions$=new B.X(!1),this.showUserOptions$=new B.X(!1)}logout(){this.store.dispatch(J.Y.logout())}ngOnInit(){this.commentsService.getUserNotifications().pipe((0,P.q)(1)).subscribe(r=>this.commentsService.userNotifications$.next(r.toString()))}ngOnDestroy(){}}return n.\u0275fac=function(r){return new(r||n)(e.Y36(t.yh),e.Y36(j.r))},n.\u0275cmp=e.Xpm({type:n,selectors:[["navbar"]],standalone:!0,features:[e.jDz],decls:2,vars:3,consts:[["class","surface-overlay shadow-2 flex relative lg:static justify-content-between nav navbar","style","min-height: 55px",4,"ngIf"],[1,"surface-overlay","shadow-2","flex","relative","lg:static","justify-content-between","nav","navbar",2,"min-height","55px"],["pRipple","","pStyleClass","@next","enterClass","hidden","leaveToClass","hidden",1,"cursor-pointer","inline-flex","align-items-center","px-3","lg:hidden","text-700",3,"hideOnOutsideClick"],[1,"pi","pi-bars","text-2xl"],[1,"hidden","lg:flex","absolute","lg:static","w-full","surface-overlay","left-0","top-100","z-1","shadow-2","lg:shadow-none"],[1,"flex","list-none","p-0","m-0","flex-column","lg:flex-row"],[1,"h-full"],["pRipple","","routerLinkActive","border-blue-500",1,"cursor-pointer","h-full","inline-flex","align-items-center","text-600","border-left-2","lg:border-left-none","lg:border-bottom-2","border-transparent","hover:border-500","transition-colors","transition-duration-150","py-3","lg:py-0","px-3","no-underline",3,"routerLink","routerLinkActiveOptions"],[1,"pi","pi-home","mr-2"],[1,"font-medium"],[1,"pi","pi-cog","mr-2"],["class","lg:relative",3,"click",4,"requiredRoles"],[1,"pi","pi-ellipsis-v","text-xl"],[1,"hidden","lg:flex","lg:justify-content-end","absolute","lg:static","w-full","surface-overlay","left-0","top-100","z-1","shadow-2","lg:shadow-none"],["pRipple","","routerLinkActive","border-blue-500",1,"cursor-pointer","h-full","inline-flex","align-items-center","text-600","py-3","lg:py-0","px-3","border-left-2","lg:border-left-none","lg:border-bottom-2","border-transparent","hover:border-500","transition-colors","transition-duration-150","no-underline",3,"routerLink","routerLinkActiveOptions"],[1,"pi","pi-inbox","mr-2"],[1,"font-medium","inline"],[1,"pi","pi-bell","mr-2"],["class","ml-2",3,"value",4,"ngIf"],[1,"h-full","relative",3,"click"],["pRipple","","pStyleClass","@next","enterClass","hidden","enterActiveClass","scalein","leaveToClass","hidden","leaveActiveClass","fadeout",1,"cursor-pointer","h-full","inline-flex","align-items-center","text-600","py-3","lg:py-0","px-3","border-left-2","lg:border-left-none","lg:border-bottom-2","border-transparent","hover:border-500","transition-colors","transition-duration-150",3,"hideOnOutsideClick"],["styleClass","mr-2","shape","circle",1,"lg:mr-0",3,"label"],[1,"mx-2","font-medium","text-900"],[1,"pi","pi-angle-down"],[1,"hidden","static","lg:absolute","w-full","surface-overlay","left-0","top-100","z-1","shadow-none","lg:shadow-2","origin-top","border-round","pl-3","lg:pl-0"],[1,"list-none","p-0","m-0"],[4,"ngIf"],["pRipple","",1,"cursor-pointer","h-full","inline-flex","align-items-center","text-600","border-left-2","border-transparent","hover:border-500","transition-colors","transition-duration-150","p-3",3,"click"],[1,"pi","pi-sign-out","mr-2"],[1,"lg:relative",3,"click"],["pRipple","","pStyleClass","@next","enterClass","hidden","enterActiveClass","scalein","leaveToClass","hidden","leaveActiveClass","fadeout",1,"flex","p-3","align-items-center","text-600","hover:text-900","hover:surface-100","font-medium","border-round","cursor-pointer","transition-colors","transition-duration-150",3,"hideOnOutsideClick"],[1,"pi","pi-users","mr-2"],[1,"pi","pi-angle-down","ml-auto","lg:ml-3"],[1,"list-none","py-0","pl-3","m-0","lg:px-0","lg:py-0","border-round","shadow-0","lg:shadow-2","lg:border-1","border-50","lg:absolute","surface-overlay","hidden","origin-top","w-full","lg:w-15rem","cursor-pointer","no-underline"],["pRipple","","class","flex p-3 align-items-center text-600 hover:text-900 hover:surface-100 transition-colors transition-duration-150 no-underline","routerLinkActive","border-blue-500",3,"routerLink","routerLinkActiveOptions","click",4,"requiredRoles"],["pRipple","","routerLinkActive","border-blue-500",1,"flex","p-3","align-items-center","text-600","hover:text-900","hover:surface-100","transition-colors","transition-duration-150","no-underline",3,"routerLink","routerLinkActiveOptions","click"],[1,"ml-2",3,"value"],["pRipple","",1,"cursor-pointer","h-full","inline-flex","align-items-center","text-600","border-left-2","border-transparent","hover:border-500","transition-colors","transition-duration-150","p-3","no-underline",3,"routerLink","click"],[1,"pi","pi-user","mr-2"]],template:function(r,d){1&r&&(e.YNc(0,xe,47,29,"div",0),e.ALo(1,"async")),2&r&&e.Q6J("ngIf",e.lcZ(1,1,d.user$))},dependencies:[S,I,a.T,a.H,f.rH,o,U,l.O5,l.Ov,f.Od,z.O,$.F,$.q],encapsulation:2,changeDetection:0}),n})();var Oe=i(2474),q=i(5593),Y=i(1493),G=i(1558);function Le(n,u){if(1&n){const r=e.EpF();e.TgZ(0,"div",5)(1,"p"),e._uU(2),e.qZA(),e.TgZ(3,"p-button",6),e.NdJ("click",function(){e.CHM(r);const m=e.oxw();return e.KtG(m.goToOffensiveArticles())}),e.qZA()()}if(2&n){const r=e.oxw();e.xp6(2),e.hij("We found ",r.data.articles," offensive articles")}}function De(n,u){if(1&n){const r=e.EpF();e.TgZ(0,"div",5)(1,"p"),e._uU(2),e.qZA(),e.TgZ(3,"p-button",7),e.NdJ("click",function(){e.CHM(r);const m=e.oxw();return e.KtG(m.goToOffensiveComments())}),e.qZA()()}if(2&n){const r=e.oxw();e.xp6(2),e.hij("We found ",r.data.comments," offensive comments")}}let Ue=(()=>{class n{onKeydownHandler(r){this.closeDialog()}constructor(r,d){this.dialogService=r,this.router=d,this.data=this.dialogService.data}closeDialog(){this.dialogService.closeDialog(W.iR.AdminNotification)}goToOffensiveArticles(){this.router.navigate(["/private","users","offensive-articles"]),this.closeDialog()}goToOffensiveComments(){this.router.navigate(["/private","users","offensive-comments"]),this.closeDialog()}}return n.\u0275fac=function(r){return new(r||n)(e.Y36(G.x),e.Y36(f.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["admin-notification-dialog"]],hostBindings:function(r,d){1&r&&e.NdJ("keydown.escape",function(K){return d.onKeydownHandler(K)},!1,e.evT)},standalone:!0,features:[e.jDz],decls:8,vars:2,consts:[[1,"dialog-container"],[1,"color-main"],["icon","pi pi-times","styleClass","p-button-rounded p-button-outlined p-button-text p-button-sm",1,"close-dialog",3,"click"],[1,"body"],["class","w-100 flex align-items-center justify-content-between",4,"ngIf"],[1,"w-100","flex","align-items-center","justify-content-between"],["styleClass"," p-button-text p-button-sm","label","Manage Articles",3,"click"],["styleClass","p-button-text p-button-sm","label","Manage comments",3,"click"]],template:function(r,d){1&r&&(e.TgZ(0,"article",0)(1,"header")(2,"h1",1),e._uU(3,"Offensive Words detected"),e.qZA(),e.TgZ(4,"p-button",2),e.NdJ("click",function(){return d.closeDialog()}),e.qZA()(),e.TgZ(5,"div",3),e.YNc(6,Le,4,1,"div",4),e.YNc(7,De,4,1,"div",4),e.qZA()()),2&r&&(e.xp6(6),e.Q6J("ngIf",null==d.data?null:d.data.articles),e.xp6(1),e.Q6J("ngIf",null==d.data?null:d.data.comments))},dependencies:[l.ez,l.O5,q.hJ,q.zx,Y.S],styles:["footer[_ngcontent-%COMP%]{display:flex;column-gap:20px}.body[_ngcontent-%COMP%]{margin:10px 0 17px;display:flex;flex-direction:column;row-gap:30px}"],changeDetection:0}),n})();const Te=function(){return{maxWidth:"680px"}};function be(n,u){1&n&&(e.TgZ(0,"p-dialog",4),e._UZ(1,"admin-notification-dialog"),e.qZA()),2&n&&(e.Akn(e.DdM(7,Te)),e.Q6J("visible",!0)("modal",!0)("draggable",!1)("resizable",!1)("showHeader",!1))}let Me=(()=>{class n{constructor(r){this.dialogService=r,this.dialog$=this.dialogService.dialog$}}return n.\u0275fac=function(r){return new(r||n)(e.Y36(G.x))},n.\u0275cmp=e.Xpm({type:n,selectors:[["layout"]],standalone:!0,features:[e.jDz],decls:7,vars:3,consts:[[1,"min-h-screen","flex","flex-column","surface-ground","relative"],[3,"visible","modal","draggable","resizable","style","showHeader",4,"ngIf"],[1,"px-0","py-4","md:px-4","flex","flex-column","flex-auto","relative"],[1,"surface-border","border-round","surface-card","full-content-height","relative",2,"min-height","20rem"],[3,"visible","modal","draggable","resizable","showHeader"]],template:function(r,d){if(1&r&&(e.TgZ(0,"div",0),e._UZ(1,"navbar"),e.YNc(2,be,2,8,"p-dialog",1),e.ALo(3,"async"),e.TgZ(4,"div",2)(5,"div",3),e._UZ(6,"router-outlet"),e.qZA()()()),2&r){let m;e.xp6(2),e.Q6J("ngIf",null==(m=e.lcZ(3,1,d.dialog$))?null:m.adminNotification)}},dependencies:[l.ez,l.O5,l.Ov,f.lC,a.T,o,E.j,S,Ee,Oe.I,Ue,Y.S,Y.V],styles:["navbar[_ngcontent-%COMP%]{background:white;position:sticky;top:0;width:100%;z-index:1;transition:height .3s;border-bottom:1px solid #4957b6}"],changeDetection:0}),n})();var Re=i(9083),L=i(4351),x=i(4004),D=i(262),O=i(9646),Se=i(8372),Ke=i(1884),ee=i(3900),M=i(6434),te=i(8505),H=i(5257);let Ze=(()=>{class n{constructor(r,d,m,K){this.store=r,this.actions$=d,this.articlesService=m,this.dialogManager=K,this.loadRecentArticles$=(0,s.GW)(()=>this.actions$.pipe((0,s.l4)(M.u.loadRecentArticles),(0,L.b)(v=>this.articlesService.getRecentArticles().pipe((0,x.U)(c=>M.u.loadArticlesSuccess({articles:c})),(0,D.K)(c=>(0,O.of)(M.u.loadArticlesFailure(c))))))),this.loadMyArticles$=(0,s.GW)(()=>this.actions$.pipe((0,s.l4)(M.u.loadMyArticles),(0,s.IC)(()=>this.store.select(F.A.selectLoggedUser)),(0,L.b)(([v,c])=>this.articlesService.getAllArticles(c?.id).pipe((0,x.U)(_=>M.u.loadArticlesSuccess({articles:_})),(0,D.K)(_=>(0,O.of)(M.u.loadArticlesFailure(_))))))),this.loadUserArticles$=(0,s.GW)(()=>this.actions$.pipe((0,s.l4)(M.u.loadUserArticles),(0,L.b)(({userId:v})=>this.articlesService.getAllArticles(v).pipe((0,x.U)(c=>M.u.loadArticlesSuccess({articles:c})),(0,D.K)(c=>(0,O.of)(M.u.loadArticlesFailure(c))))))),this.loadOffensiveArticles$=(0,s.GW)(()=>this.actions$.pipe((0,s.l4)(M.u.loadOffensiveArticles),(0,L.b)(v=>this.articlesService.getOffensiveArticles().pipe((0,x.U)(c=>M.u.loadArticlesSuccess({articles:c})),(0,D.K)(c=>(0,O.of)(M.u.loadArticlesFailure(c))))))),this.onLoadArticlesSuccess$=(0,s.GW)(()=>this.actions$.pipe((0,s.l4)(M.u.loadArticlesSuccess),(0,te.b)(()=>this.dialogManager.closeDialog(W.iR.Delete))),{dispatch:!1}),this.deleteArticle$=(0,s.GW)(()=>this.actions$.pipe((0,s.l4)(M.u.deleteArticle),(0,L.b)(({articleId:v})=>this.articlesService.deleteArticle(v).pipe((0,x.U)(c=>M.u.loadMyArticles()))))),this.filterArticles$=(0,s.GW)(()=>this.actions$.pipe((0,s.l4)(M.u.filterArticlesBy),(0,Se.b)(400),(0,Ke.x)(),(0,ee.w)(v=>this.articlesService.filterBy(v.filterBy,v.from).pipe((0,x.U)(c=>M.u.loadArticlesSuccess({articles:c}))))))}}return n.\u0275fac=function(r){return new(r||n)(e.LFG(t.yh),e.LFG(s.eX),e.LFG(H.n),e.LFG(G.x))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();var Ie=i(5687),R=i(3248),se=i(8736),Pe=i(6026);let Ne=(()=>{class n{constructor(r,d,m,K){this.actions$=r,this.userService=d,this.dialogService=m,this.store=K,this.loadUsers$=(0,s.GW)(()=>this.actions$.pipe((0,s.l4)(R.W.loadUsers),(0,L.b)(v=>this.userService.getAll().pipe((0,x.U)(c=>R.W.loadUsersSuccess({users:c})),(0,D.K)(c=>(0,O.of)(R.W.loadUsersFailure(c))))))),this.loadUsersRanking$=(0,s.GW)(()=>this.actions$.pipe((0,s.l4)(R.W.loadUsersRanking),(0,s.IC)(()=>this.store.select(se.L.selectData)),(0,L.b)(([v,{startDate:c,endDate:_}])=>this.userService.getUserRankings(c,_).pipe((0,x.U)(Z=>R.W.loadUsersSuccess({users:Z})),(0,D.K)(Z=>(0,O.of)(R.W.loadUsersFailure(Z))))))),this.onLoadUsersSuccess$=(0,s.GW)(()=>this.actions$.pipe((0,s.l4)(R.W.loadUsersSuccess),(0,te.b)(v=>{this.dialogService.closeDialog(W.iR.Delete),this.dialogService.closeDialog(W.iR.User)})),{dispatch:!1}),this.createNewUser$=(0,s.GW)(()=>this.actions$.pipe((0,s.l4)(R.W.createNewUser),(0,L.b)(({user:v})=>this.userService.createNewUser(v).pipe((0,x.U)(c=>R.W.loadUsers()),(0,D.K)(c=>(0,O.of)(R.W.createNewUserFailure(c))))))),this.editUser$=(0,s.GW)(()=>this.actions$.pipe((0,s.l4)(R.W.editUser),(0,L.b)(({user:v})=>this.userService.editUser(v).pipe((0,x.U)(c=>R.W.loadUsers()),(0,D.K)(c=>(0,O.of)(R.W.editUserFailure(c))))))),this.delete$=(0,s.GW)(()=>this.actions$.pipe((0,s.l4)(R.W.deleteUser),(0,L.b)(({userId:v})=>this.userService.delete(v).pipe((0,x.U)(c=>R.W.loadUsers())))))}}return n.\u0275fac=function(r){return new(r||n)(e.LFG(s.eX),e.LFG(Pe.K),e.LFG(G.x),e.LFG(t.yh))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();var We=i(218),Q=i(6129),C=i(1318),k=i(5577),$e=i(1365),V=i(1624),Fe=i(6155),ie=i(7185);let we=(()=>{class n{constructor(r,d,m,K,v){this.actions$=r,this.store=d,this.articlesService=m,this.commentsService=K,this.toast=v,this.approveArticle$=(0,s.GW)(()=>this.actions$.pipe((0,s.l4)(C.o.approveArticle),(0,L.b)(({articleId:c})=>this.articlesService.approveArticle(c).pipe((0,x.U)(_=>C.o.loadArticleSuccess({article:_})),(0,D.K)(_=>(0,O.of)(C.o.loadArticleFailure(_))))))),this.rejectArticle$=(0,s.GW)(()=>this.actions$.pipe((0,s.l4)(C.o.rejectArticle),(0,L.b)(({articleId:c})=>this.articlesService.rejectArticle(c).pipe((0,x.U)(_=>C.o.loadArticleSuccess({article:_})),(0,D.K)(_=>(0,O.of)(C.o.loadArticleFailure(_))))))),this.loadArticle$=(0,s.GW)(()=>this.actions$.pipe((0,s.l4)(C.o.loadArticle),(0,L.b)(({articleId:c})=>this.articlesService.getArticle(c).pipe((0,x.U)(_=>C.o.loadArticleSuccess({article:_})),(0,D.K)(_=>(0,O.of)(C.o.loadArticleFailure(_))))))),this.approveComment$=(0,s.GW)(()=>this.actions$.pipe((0,s.l4)(C.o.approveArticleComment),(0,L.b)(({commentId:c,articleId:_})=>this.commentsService.approveComment(c).pipe((0,x.U)(()=>(this.toast.success("Comment now is visible for all users","Comment accepted"),C.o.loadArticle({articleId:_}))),(0,D.K)(Z=>(0,O.of)(C.o.loadArticleFailure(Z))))))),this.rejectComment$=(0,s.GW)(()=>this.actions$.pipe((0,s.l4)(C.o.rejectArticleComment),(0,L.b)(({commentId:c,articleId:_})=>this.commentsService.rejectComment(c).pipe((0,x.U)(()=>(this.toast.success("Comment has been rejected","Comment Rejected"),C.o.loadArticle({articleId:_}))),(0,D.K)(Z=>(0,O.of)(C.o.loadArticleFailure(Z))))))),this.addComment$=(0,s.GW)(()=>this.actions$.pipe((0,s.l4)(C.o.addComment),(0,s.IC)(()=>this.store.select(se.L.selectData)),(0,Q.z)(([{articleId:c,authorId:_},{comment:Z}])=>this.commentsService.addComment(c,_,Z).pipe((0,x.U)(X=>C.o.addCommentSuccess({articleId:c,comment:X})),(0,D.K)(X=>(0,O.of)(C.o.addCommentFailure(X))))))),this.addCommentSuccess$=(0,s.GW)(()=>this.actions$.pipe((0,s.l4)(C.o.addCommentSuccess),(0,k.z)(({articleId:c,comment:_})=>(_.isApproved||this.toast.info("Comment has been put under review because it contains offensive words. Once it is approved it will be visible for other users","Comment under revision",{tapToDismiss:!1,timeOut:2e4,closeButton:!0}),[C.o.loadArticle({articleId:c}),V.i.resetForm()])))),this.addReply$=(0,s.GW)(()=>this.actions$.pipe((0,s.l4)(C.o.addReply),(0,Q.z)(({articleId:c,commentReply:_})=>this.commentsService.addReply(_.commentId,_).pipe((0,x.U)(Z=>C.o.addReplySuccess({reply:Z,articleId:c})),(0,D.K)(Z=>(0,O.of)(C.o.addReplyFailure(Z))))))),this.addReplySuccess$=(0,s.GW)(()=>this.actions$.pipe((0,s.l4)(C.o.addReplySuccess),(0,k.z)(({reply:c,articleId:_})=>(c.isApproved||this.toast.info("Reply has been put under review because it contains offensive words. Once it is approved it will be visible for other users","Reply under revision",{tapToDismiss:!1,timeOut:2e4,closeButton:!0}),[C.o.loadArticle({articleId:_}),V.i.resetForm()])))),this.onMarkAllCommentsAsViewed$=(0,s.GW)(()=>this.actions$.pipe((0,s.l4)(C.o.markAllCommentsAsViewed),(0,$e.M)(this.store.select(Fe.X.selectData)),(0,L.b)(([c,_])=>this.articlesService.markAllCommentsAsViewed(_?.id))),{dispatch:!1}),this.onLoadArticleSuccess$=(0,s.GW)(()=>this.actions$.pipe((0,s.l4)(C.o.loadArticleSuccess),(0,x.U)(()=>C.o.closeReplyBox())))}}return n.\u0275fac=function(r){return new(r||n)(e.LFG(s.eX),e.LFG(t.yh),e.LFG(H.n),e.LFG(j.r),e.LFG(ie._W))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();var Be=i(9300),Ge=i(3210),Je=i(1098);let ze=(()=>{class n{constructor(r,d,m){this.store=r,this.dialogService=d,this.articleService=m}waitForOffensiveWordsToLoad(){return this.store.select(Je.y.selectLoaded).pipe((0,Be.h)(r=>r),(0,P.q)(1))}triggerAdminActionsModal(){this.articleService.getOffensiveItems().subscribe(r=>{r.articles+r.comments>0&&this.dialogService.openDialog(W.iR.AdminNotification,{data:r})})}canActivate(r){return this.store.select(F.A.selectLoggedUser).pipe((0,ee.w)(d=>(d&&d.roles.includes(W.GD.Admin)&&(this.store.dispatch(Ge.v.loadWords()),this.triggerAdminActionsModal()),(0,O.of)(!0))),(0,P.q)(1))}}return n.\u0275fac=function(r){return new(r||n)(e.LFG(t.yh),e.LFG(G.x),e.LFG(H.n))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var je=i(6996),b=i(3607);let Ye=(()=>{class n{constructor(r,d,m,K){this.store=r,this.actions$=d,this.commentsService=m,this.toast=K,this.loadMyComments$=(0,s.GW)(()=>this.actions$.pipe((0,s.l4)(b.p.loadMyComments),(0,L.b)(v=>this.commentsService.getMyComments().pipe((0,x.U)(c=>b.p.loadCommentsSuccess({comments:c})),(0,D.K)(c=>(0,O.of)(b.p.loadCommentsFailure(c))))))),this.loadOffensiveComments$=(0,s.GW)(()=>this.actions$.pipe((0,s.l4)(b.p.loadOffensiveComments),(0,L.b)(v=>this.commentsService.getOffensiveComments().pipe((0,x.U)(c=>b.p.loadCommentsSuccess({comments:c})),(0,D.K)(c=>(0,O.of)(b.p.loadCommentsFailure(c))))))),this.addReply$=(0,s.GW)(()=>this.actions$.pipe((0,s.l4)(b.p.addReply),(0,Q.z)(({commentReply:v})=>this.commentsService.addReply(v.commentId,v).pipe((0,x.U)(c=>b.p.addReplySuccess({reply:c})),(0,D.K)(c=>(0,O.of)(b.p.addReplyFailure(c))))))),this.addReplySuccess$=(0,s.GW)(()=>this.actions$.pipe((0,s.l4)(b.p.addReplySuccess),(0,k.z)(({reply:v})=>(v.isApproved||this.toast.info("Reply has been put under review because it contains offensive words. Once it is approved it will be visible for other users","Reply under revision",{tapToDismiss:!1,timeOut:2e4,closeButton:!0}),v.isApproved&&this.toast.success("Comment successfully replied","Comment replied"),[b.p.loadMyComments(),b.p.closeReplyBox(),V.i.resetForm()])))),this.approveComment$=(0,s.GW)(()=>this.actions$.pipe((0,s.l4)(b.p.approveComment),(0,L.b)(({commentId:v})=>this.commentsService.approveComment(v).pipe((0,x.U)(()=>(this.toast.success("Comment now is visible for all users","Comment accepted"),b.p.loadOffensiveComments())),(0,D.K)(c=>(0,O.of)(b.p.loadCommentsFailure(c))))))),this.rejectComment$=(0,s.GW)(()=>this.actions$.pipe((0,s.l4)(b.p.rejectComment),(0,L.b)(({commentId:v})=>this.commentsService.rejectComment(v).pipe((0,x.U)(()=>(this.toast.success("Comment has been rejected","Comment Rejected"),b.p.loadOffensiveComments())),(0,D.K)(c=>(0,O.of)(b.p.loadCommentsFailure(c)))))))}}return n.\u0275fac=function(r){return new(r||n)(e.LFG(t.yh),e.LFG(s.eX),e.LFG(j.r),e.LFG(ie._W))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();var He=i(2021),Qe=i(8224);const ke=[{path:"",component:Me,canActivate:[ze],providers:[(0,t.oY)(Re.$),(0,s.y3)(Ze)],children:[{path:"",redirectTo:"/private/articles",pathMatch:"full"},{path:"articles",loadChildren:()=>Promise.all([i.e(648),i.e(631),i.e(592),i.e(240)]).then(i.bind(i,7240)),providers:[(0,t.oY)(We.j),(0,s.y3)(we)]},{path:"users",loadChildren:()=>Promise.all([i.e(648),i.e(492),i.e(592),i.e(645)]).then(i.bind(i,8645)),providers:[(0,t.oY)(Ie.K),(0,s.y3)(Ne),(0,t.oY)(je.c),(0,s.y3)(Ye),(0,t.oY)(He.H),(0,s.y3)(Qe.x)]}]}]},6026:(T,h,i)=>{i.d(h,{K:()=>l});var t=i(4650),s=i(4640);let l=(()=>{class f{constructor(e){this.api=e}getAll(){return this.api.get("/users")}getMyArticles(){return this.api.get("/articles")}getSpecificUser(e){return this.api.get("/users/"+e)}delete(e){return this.api.delete("/users/"+e)}createNewUser(e){return this.api.post("/users/",this.toNewUserDTO(e))}editUser(e){return this.api.put("/users/"+e.id,this.toUserDTO(e))}getUserRankings(e,A){return this.api.get(`/users/ranking?startDate=${e.toISOString()}&endDate=${A.toISOString()}`)}toUserDTO(e){return{id:e.id,email:e.email,password:e.password,username:e.username,firstName:e.firstName,lastName:e.lastName,roles:Array.isArray(e.roles)?e.roles:[e.roles]}}toNewUserDTO(e){return{email:e.email,password:e.password,username:e.username,firstName:e.firstName,lastName:e.lastName,roles:[e.roles]}}}return f.\u0275fac=function(e){return new(e||f)(t.LFG(s.s))},f.\u0275prov=t.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},1098:(T,h,i)=>{i.d(h,{y:()=>e});var t=i(7742);const{selectEntities:s,selectLoaded:l,selectLoading:f,selectError:a}=t.J,e={selectEntities:s,selectLoaded:l,selectLoading:f,selectError:a}},3248:(T,h,i)=>{i.d(h,{W:()=>s});var t=i(9653);const s=(0,t.R7)({source:"User List",events:{Reset:(0,t.uZ)(),"Load Users":(0,t.uZ)(),"Load Users Ranking":(0,t.uZ)(),"Load Users Success":(0,t.Ky)(),"Load Users Failure":(0,t.Ky)(),"Create New User":(0,t.Ky)(),"Create New User Success":(0,t.Ky)(),"Create New User Failure":(0,t.Ky)(),"Edit User":(0,t.Ky)(),"Edit User Success":(0,t.Ky)(),"Edit User Failure":(0,t.Ky)(),"Delete User":(0,t.Ky)()}})},5687:(T,h,i)=>{i.d(h,{K:()=>a});var t=i(9653),s=i(6434),l=i(3248);const f={entities:[],loaded:!1,loading:!1,error:null,dialogError:null},a=(0,t.Tz)({name:"userList",reducer:(0,t.Lq)(f,(0,t.on)(l.W.reset,()=>f),(0,t.on)(l.W.loadUsers,l.W.loadUsersRanking,e=>({...e,loading:!0})),(0,t.on)(l.W.loadUsersSuccess,(e,{users:A})=>({...e,entities:A,loaded:!0,loading:!1,error:null})),(0,t.on)(l.W.loadUsersFailure,(e,A)=>({...e,entities:[],loaded:!1,loading:!1,error:A.error})),(0,t.on)(s.u.deleteArticle,e=>({...e,loading:!0})),(0,t.on)(l.W.editUser,e=>({...e,loading:!0,dialogError:null})),(0,t.on)(l.W.editUserFailure,(e,A)=>({...e,loading:!1,dialogError:A.error})),(0,t.on)(l.W.createNewUser,e=>({...e,loading:!0,dialogError:null})),(0,t.on)(l.W.createNewUserFailure,(e,A)=>({...e,loading:!1,dialogError:A.error})))})},3324:(T,h,i)=>{i.d(h,{h:()=>s});var t=i(9653);const s=(0,t.R7)({source:"User",events:{reset:(0,t.uZ)(),"Load User":(0,t.Ky)(),"Load User Success":(0,t.Ky)(),"Load User Failure":(0,t.Ky)(),"Edit User Profile":(0,t.Ky)(),"Edit User Profile Success":(0,t.Ky)(),"Edit User Profile Failure":(0,t.Ky)()}})},8224:(T,h,i)=>{i.d(h,{x:()=>I});var t=i(2260),s=i(4004),l=i(262),f=i(8505),a=i(1318),e=i(4351),A=i(9646),g=i(3324),y=i(6632),U=i(4650),o=i(6026),E=i(7185),p=i(8759);let I=(()=>{class S{constructor(F,J,W,z){this.actions$=F,this.userService=J,this.toast=W,this.router=z,this.loadUser$=(0,t.GW)(()=>this.actions$.pipe((0,t.l4)(g.h.loadUser),(0,e.b)(({userId:$})=>this.userService.getSpecificUser($).pipe((0,s.U)(P=>g.h.loadUserSuccess({user:P})),(0,l.K)(P=>(0,A.of)(a.o.loadArticleFailure(P))))))),this.editUserProfile$=(0,t.GW)(()=>this.actions$.pipe((0,t.l4)(g.h.editUserProfile),(0,e.b)(({user:$})=>this.userService.editUser($).pipe((0,s.U)(P=>g.h.editUserProfileSuccess({user:P})),(0,l.K)(P=>(0,A.of)(g.h.editUserProfileFailure(P))))))),this.onEditProfileSuccess$=(0,t.GW)(()=>this.actions$.pipe((0,t.l4)(g.h.editUserProfileSuccess),(0,f.b)($=>{this.toast.success("User Profile has been modified","Success"),this.router.navigate(["./private","articles","personal"])}),(0,s.U)(({user:$})=>y.Y.updateLoggedUser({user:$}))))}}return S.\u0275fac=function(F){return new(F||S)(U.LFG(t.eX),U.LFG(o.K),U.LFG(E._W),U.LFG(p.F0))},S.\u0275prov=U.Yz7({token:S,factory:S.\u0275fac}),S})()},2021:(T,h,i)=>{i.d(h,{H:()=>f});var t=i(9653),s=i(3324);const l={data:null,loaded:!1,loading:!1,error:null},f=(0,t.Tz)({name:"user",reducer:(0,t.Lq)(l,(0,t.on)(s.h.reset,()=>l),(0,t.on)(s.h.loadUser,a=>({...a,loading:!0})),(0,t.on)(s.h.loadUserSuccess,(a,{user:e})=>({...a,data:e,loaded:!0,loading:!1,error:null})),(0,t.on)(s.h.loadUserFailure,(a,{error:e})=>({...a,loaded:!1,loading:!1,error:e})),(0,t.on)(s.h.editUserProfile,a=>({...a,loading:!0,error:null})),(0,t.on)(s.h.editUserProfileSuccess,a=>({...a,loading:!1,error:null})),(0,t.on)(s.h.editUserProfileFailure,(a,e)=>({...a,loading:!1,error:e.error})))})},8271:(T,h,i)=>{i.d(h,{F:()=>U,q:()=>y});var t=i(4650),s=i(6895);function l(o,E){if(1&o&&(t.TgZ(0,"span",4),t._uU(1),t.qZA()),2&o){const p=t.oxw();t.xp6(1),t.Oqu(p.label)}}function f(o,E){if(1&o&&t._UZ(0,"span",6),2&o){const p=t.oxw(2);t.Tol(p.icon),t.Q6J("ngClass","p-avatar-icon")}}function a(o,E){if(1&o&&t.YNc(0,f,1,3,"span",5),2&o){const p=t.oxw(),I=t.MAs(6);t.Q6J("ngIf",p.icon)("ngIfElse",I)}}function e(o,E){if(1&o){const p=t.EpF();t.TgZ(0,"img",8),t.NdJ("error",function(S){t.CHM(p);const B=t.oxw(2);return t.KtG(B.imageError(S))}),t.qZA()}if(2&o){const p=t.oxw(2);t.Q6J("src",p.image,t.LSH)}}function A(o,E){if(1&o&&t.YNc(0,e,1,1,"img",7),2&o){const p=t.oxw();t.Q6J("ngIf",p.image)}}const g=["*"];let y=(()=>{class o{constructor(){this.size="normal",this.shape="square",this.onImageError=new t.vpe}containerClass(){return{"p-avatar p-component":!0,"p-avatar-image":null!=this.image,"p-avatar-circle":"circle"===this.shape,"p-avatar-lg":"large"===this.size,"p-avatar-xl":"xlarge"===this.size}}imageError(p){this.onImageError.emit(p)}}return o.\u0275fac=function(p){return new(p||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["p-avatar"]],hostAttrs:[1,"p-element"],inputs:{label:"label",icon:"icon",image:"image",size:"size",shape:"shape",style:"style",styleClass:"styleClass"},outputs:{onImageError:"onImageError"},ngContentSelectors:g,decls:7,vars:6,consts:[[3,"ngClass","ngStyle"],["class","p-avatar-text",4,"ngIf","ngIfElse"],["iconTemplate",""],["imageTemplate",""],[1,"p-avatar-text"],[3,"class","ngClass",4,"ngIf","ngIfElse"],[3,"ngClass"],[3,"src","error",4,"ngIf"],[3,"src","error"]],template:function(p,I){if(1&p&&(t.F$t(),t.TgZ(0,"div",0),t.Hsn(1),t.YNc(2,l,2,1,"span",1),t.YNc(3,a,1,2,"ng-template",null,2,t.W1O),t.YNc(5,A,1,1,"ng-template",null,3,t.W1O),t.qZA()),2&p){const S=t.MAs(4);t.Tol(I.styleClass),t.Q6J("ngClass",I.containerClass())("ngStyle",I.style),t.xp6(2),t.Q6J("ngIf",I.label)("ngIfElse",S)}},dependencies:[s.mk,s.O5,s.PC],styles:[".p-avatar{display:inline-flex;align-items:center;justify-content:center;width:2rem;height:2rem;font-size:1rem}.p-avatar.p-avatar-image{background-color:transparent}.p-avatar.p-avatar-circle{border-radius:50%;overflow:hidden}.p-avatar .p-avatar-icon{font-size:1rem}.p-avatar img{width:100%;height:100%}\n"],encapsulation:2,changeDetection:0}),o})(),U=(()=>{class o{}return o.\u0275fac=function(p){return new(p||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[s.ez]}),o})()}}]);