"use strict";(self.webpackChunkangular_template=self.webpackChunkangular_template||[]).push([[883],{4883:(f,E,o)=>{o.r(E),o.d(E,{default:()=>L});var l=o(6895),d=o(8736),a=o(4281),p=o(1624),u=o(2648),h=o(2474),r=o(5796),c=o(8909),i=o(4006),D=o(1724),O=o(5593),g=o(2722),I=o(7579),t=o(4650),P=o(9653),M=o(7185),A=o(1422),C=o(4688);const T=["dynamicForm"];function v(s,m){1&s&&t._UZ(0,"error-badge",6),2&s&&t.Q6J("error",m.ngIf)}function y(s,m){1&s&&t._UZ(0,"loading")}let L=(()=>{class s{constructor(e,n){this.store=e,this.toast=n,this.structure$=this.store.select(d.L.selectStructure),this.data$=this.store.select(d.L.selectData),this.loading$=this.store.select(r.V.selectLoading),this.error$=this.store.select(r.V.selectError),this.componentDestroyed$=new I.x}ngOnInit(){this.store.dispatch(c.u.loadImporterOptions())}ngAfterViewInit(){this.store.select(r.V.selectImporterOptions).pipe((0,g.R)(this.componentDestroyed$)).subscribe(e=>{this.store.dispatch(p.i.setStructure({structure:[{type:a.fS.TEXT,name:"filePath",label:"Path",placeholder:"Path to your importer",validators:[i.kI.required]},{type:a.fS.SELECT,name:"importerName",label:"Importer",validators:[i.kI.required],placeholder:"Select An importer",select:{options:e}}]}))})}updateForm(e){this.store.dispatch(p.i.updateData({state:e}))}submit(){this.dynamicForm.submitted(),this.dynamicForm.form.valid?this.store.dispatch(c.u.importArticles()):this.handleInvalidForm()}handleInvalidForm(){this.toast.error("Form submission failed. Please correct the highlighted fields.","Error")}ngOnDestroy(){this.store.dispatch(c.u.reset()),this.store.dispatch(p.i.resetForm()),this.componentDestroyed$.next(),this.componentDestroyed$.complete()}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(P.yh),t.Y36(M._W))},s.\u0275cmp=t.Xpm({type:s,selectors:[["article-import"]],viewQuery:function(e,n){if(1&e&&t.Gf(T,7),2&e){let _;t.iGM(_=t.CRH())&&(n.dynamicForm=_.first)}},standalone:!0,features:[t.jDz],decls:12,vars:11,consts:[[1,"private-page-container"],[1,"form",3,"data$","structure$","updateForm"],["dynamicForm",""],["label","Import Articles",3,"loading","click"],[3,"error",4,"ngIf"],[4,"ngIf"],[3,"error"]],template:function(e,n){if(1&e&&(t.TgZ(0,"section",0)(1,"h1"),t._uU(2,"Import Articles"),t.qZA(),t.TgZ(3,"dynamic-form",1,2),t.NdJ("updateForm",function(B){return n.updateForm(B)}),t.qZA(),t.TgZ(5,"div")(6,"p-button",3),t.NdJ("click",function(){return n.submit()}),t.ALo(7,"async"),t.qZA()(),t.YNc(8,v,1,1,"error-badge",4),t.ALo(9,"async"),t.qZA(),t.YNc(10,y,1,0,"loading",5),t.ALo(11,"async")),2&e){let _;t.xp6(3),t.Q6J("data$",n.data$)("structure$",n.structure$),t.xp6(3),t.Q6J("loading",null!==(_=t.lcZ(7,5,n.loading$))&&void 0!==_&&_),t.xp6(2),t.Q6J("ngIf",t.lcZ(9,7,n.error$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(11,9,n.loading$))}},dependencies:[l.ez,l.O5,l.Ov,D.Z,u.N,A.r,O.hJ,O.zx,h.I,C.N],changeDetection:0}),s})()},1724:(f,E,o)=>{o.d(E,{Z:()=>h});var l=o(6895),d=o(7772),a=o(4650);const p=function(r){return{severity:"error",summary:"Error",detail:r}},u=function(r){return[r]};let h=(()=>{class r{}return r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=a.Xpm({type:r,selectors:[["error-badge"]],inputs:{error:"error"},standalone:!0,features:[a.jDz],decls:1,vars:7,consts:[[3,"value","showTransitionOptions","hideTransitionOptions"]],template:function(i,D){1&i&&a._UZ(0,"p-messages",0),2&i&&a.Q6J("value",a.VKq(5,u,a.VKq(3,p,D.error)))("showTransitionOptions","300ms")("hideTransitionOptions","300ms")},dependencies:[l.ez,d.$,d.V],changeDetection:0}),r})()}}]);